\setchapterimage[6cm]{seaside}
\setchapterpreamble[u]{\margintoc}
\chapter{Prefascist Types}
\labch{prefascist}

\shepherd{If some  Presheaves.

In particular, presheaves will turn out to be especially useful to
build models of type theory.}

In this section, we will use a bit of categorical jargon, but the reader
who is not too well versed in this dark art shall rest assured:
we only assume some basic knowledge about functors and limits.

\section{Set-theoretical Presheaves}\label{sec:categorical-reminders}

In this section, we recall the definition of presheaves and go 
over some of their uses.
% 
The reader who is already well acquainted with presheaves might want to skip
this section and go directly to \cref{sec:intensional-problems}, where we
investigate presheaves from the angle of intensional type theory.
% 
But until then, we will be working informally in a constructive set theory.

Given any category \( \cat{C} \), the category 
\( \catPsh{\cat{C}} \) of \emph{presheaves} on \( \cat{C} \) is the category 
of functors from the opposite category \( \op{\cat{C}} \) to the category of 
small sets.
\sideremark{In this definition, the \( \mathrm{Hom}_\catCat \) notation should 
    be understood in the 2-categorical sense: this object is a category, not a 
    set.}
\begin{definition}
\(
    \catPsh{\cat{C}} := \hom[\catCat]{\op{\cat{C}}}{\catSet}
\)
\end{definition}
In other words, a presheaf is a functor, and a morphism of presheaves is a 
natural transformation.

In the usual fashion of category theory, this definition is slick
and abstract, which results in a remarkably versatile object. 
% 
But in counterpart, the definition alone is not too helpful in building
intuition about presheaves -- what are they good for?

Presheaves\sidenote{sheaves, actually} were initially designed to capture the 
idea of a set continuously parametrized by a topological space, whose lattice 
of open sets was used as the index category. 
% 
The definition was later generalized to an arbitrary category, but this 
topological legacy has left traces in the terminology, with words such as 
{\color{defcolor} section} and \defnote{restriction}{If \( F \) is a presheaf 
on \( \cat{C} \), then the elements of \( F(p) \) are called sections of 
\( F \) over \( p \), and the image of a morphism \( F(\alpha) \) is called 
the restriction along \( \alpha \).}.

But in this thesis, we will mostly be interested in presheaves different 
reasons, one of them being that presheaves allow us to freely add colimits to 
a category.

\subsection{Presheaves as a Categorical Cocompletion}

Suppose that \( \cat{C} \) is \defnote{locally small}{A category is
locally small if all of its hom-sets are small sets}.
Recall the definition of the Yoneda embedding \( \yo \):
\begin{definition}
The Yoneda embedding is a functor from \( \cat{C} \) to \( \catPsh{\cat{C}} \)
defined by
\[
\begin{array}{lcl}
    \yo & : & \cat{C} \to \catPsh{\cat{C}} \\
    \yo(c) & := & \hom[\cat{C}]{\_}{c}
\end{array}
\]
The action of \( \yo \) on morphisms is given by post-composition, which
makes it into a proper functor from \( \cat{C} \) to its presheaf
category \( \catPsh{\cat{C}} \). 
\end{definition}
% 
Furthermore, the Yoneda lemma teaches us that this functor is fully faithful, 
and thus the \defnote{representable}{A presheaf is called representable when 
it is in the image of \yo} presheaves can be understood as a copy of 
\( \cat{C} \) sitting inside the larger category \( \catPsh{\cat{C}} \).

There is a precise sense in which \( \catPsh{\cat{C}} \) is generated from 
this internal copy of \( \cat{C} \) by freely adding all small colimits:

\begin{theorem}
    The category \( \catPsh{\cat{C}} \) admits all small colimits, which can
    be computed point-wise.
\end{theorem}

\begin{theorem}
    Any object of \( \catPsh{\cat{C}} \) can be obtained as a small colimit of 
    representable presheaves.
\end{theorem}

\begin{theorem}
    Given a category \( \cat{D} \) that has all small colimits and a functor
    \( F : \cat{C} \to \cat{D} \), there is a unique cocontinuous functor
    \( \widehat{\func{F₀}} : \catPsh{\cat{C}} \to \cat{D} \) such that 
    \( F = \widehat{\func{F₀}} \circ \yo \).
\end{theorem}

Proofs can be found in \sidecitet{MaclaneMoerdijk}.

Put together, these three theorems seem to paint a surprisingly simple picture 
of \( \catPsh{\cat{C}} \): we can think of a presheaf as an amalgamated sum of 
objects from \( \cat{C} \).
% 
This is why combinatorial models of spaces such as \emph{simplicial sets} and 
\emph{cubical sets} are defined as presheaves on carefully chosen categories. 
We will come back to this in the next chapter.

However, mental images are a double edged sword and can be just as misleading
as they are enlightening. In particular, the reader should note that the yoneda 
embedding does not preserve colimits that may already exist in \( \cat{C} \),
and as a consequence we should be careful to have different pictures for
\( \yo(x+y) \) and \( \yo(x) + \yo(y) \).

\subsection{Presheaves as Generalized Categories of Sets}

\begin{theorem}
    The category \( \catPsh{\cat{C}} \) admits all small limits, which can
    be computed point-wise. Moreover, the Yoneda embedding preserves
    limits that exist in \( \cat{C} \).
\end{theorem}

\begin{theorem}
    The category \( \catPsh{\cat{C}} \) is cartesian closed.
\end{theorem}

\shepherd{Forcing n stuff}

\shepherd{We can give models to type theory, too!}

\section{Type-theoretical Presheaves}\label{sec:intensional-problems}

Hopefully by now, the reader is convinced that presheaves are a simple yet 
versatile idea in category theory and thus a natural candidate for a 
translation into type theory.
% 
But while concrete first-order objects such as integers, graphs or trees 
generally translate very well, abstractions that deal with predicates, sets
and functions usually come with their lot of complications -- and presheaves
are no exception.

In this section, we explain the difficulties with defining presheaves of types
in intensional Martin-Löf Type Theory. 
% 
We use the syntax of the \Agda proof assistant for our type theoretical 
definitions.

\subsection{First Definition}

Let us assume we are working with a small category \( \cat{C} \), and that we
managed to encode it nicely inside type theory:
\sideremark[*2]{Arguments between curly braces are optional arguments, which will
    usually be inferred from the context.}

\ExecuteMetaData[chapters/literate-agda/Presheaf.tex]{category}

Furthermore, we assume that the unit laws and the associativity of
composition hold \emph{by definition}:
% 
\sideremark{Using the definitional equality in \Agda code like this is not
possible in practice, of course. This abuse of notation should rather be 
understood as assuming an actual implementation of \func{Hom}, \func{id} and
\func{\_∘\_} that satisfy the definitional equations.}

\ExecuteMetaData[chapters/literate-agda/Presheaf.tex]{equations}

meaning that the equality here is not the propositional equality \func{\_≡\_},
but the definitional equality \( \_=\_\) : these terms are convertible. 
% 
It could be the case, for instance, if we managed to express \( \cat{C} \) as a 
full subcategory of \func{Set} -- in which cases the morphisms are just 
functions, whose composition is associative by defintion.

This constraint might look very strong, but in \cref{sec:cat-strictification}
we will see that all small categories can in fact be presented in this way
in a type theory with strict propositions.

Now, how should we go about defining the type of presheaves on \( \cat{C} \)?
If we mimic the set-theoretic definition of a presheaf, we might obtain 
something that starts like this:

\ExecuteMetaData[chapters/literate-agda/Presheaf.tex]{presheaf1}

This gives the action on objects and morphisms, but we also need to verify some 
equations, as functors are supposed to preserve identities and composition.
% 
We can try to state them using the propositional equality \func{\_≡\_}:

\ExecuteMetaData[chapters/literate-agda/Presheaf.tex]{presheaf2}

and from there, all reasonable equalities such as
\begin{equation}\label{eq-psh}
    \field{F₁}\ ((f\ \func{\circ}\ g)\ \func{\circ}\ h) 
    \ \func{≡}\ 
    (\field{F₁}\ h\ \func{\circ}\ \field{F₁}\ g)\ \func{\circ}\ \field{F₁}\ f
\end{equation}
can be proved through successive rewritings using \field{F\_id} and 
\field{F\_comp}.
% 
Sure enough, this definition does correspond to presheaves when we interpret
type theory in the usual set-theoretical model \sidecite{Hofmann97}. 
% 
But as bare \MLTT lacks the extensional features of set theory, this
definition has some kinks that we might want to iron out.

\subsection{A Story about Higher Coherences}

Interestingly, if we try to prove equation \ref{eq-psh}, we can devise two
chains of rewritings that take the left hand side to the right hand
side:

\begin{center}
    \sideremark{The horizontal equalities are instances of \field{F\_comp},
        and the two vertical equalities hold by definition.}
\begin{tikzcd}
    \field{F₁}\ ((f\ \func{\circ}\ g)\ \func{\circ}\ h)
    \ar[equal]{r} \ar[equal]{d}
    & \field{F₁}\ h\ \func{\circ}\ \field{F₁}\ (f\ \func{\circ}\ g) 
    \ar[equal]{r}
    & \field{F₁}\ h\ \func{\circ}\ (\field{F₁}\ g\ \func{\circ}\ \field{F₁}\ f)
    \ar[equal]{d} \\
    \field{F₁}\ (f\ \func{\circ}\ (g\ \func{\circ}\ h))
    \ar[equal]{r}
    & \field{F₁}\ (g\ \func{\circ}\ h) \ \func{\circ}\ \field{F₁}\ f
    \ar[equal]{r}
    & (\field{F₁}\ h\ \func{\circ}\ \field{F₁}\ g)\ \func{\circ}\ \field{F₁}\ f
\end{tikzcd}
\end{center}

and these result in two different equality witnesses.
% 
We might hope to prove that these two witnesses are in fact equal ; but it does 
not seem possible without assuming additional axioms (remember that we are 
working in intensional \MLTT here, where identity proofs are by no means 
unique!).
% 
This state of affairs is rather unsatisfying, and it certainly looks like that 
kind of nuisance that will show up uninvited in our proofs later on.

To understand the source of this irritating phenomenon, it is helpful to turn 
ourselves to Homotopy Type Theory.
% 
As we explained in chapter \cref{ch:homotopy}, in \HoTT we think of types
as being \emph{spaces} instead of sets, and the two different notions of equality 
(definitional and propositional) have very different interpretations:
\begin{itemize}
    \item the definitional equality \( a = b \) corresponds to an actual, 
        on-the-nose equality between the two points, but
    \item the propositional equality \( a\ \func{≡}\ b \) is the space of
        paths connecting \( a \) to \( b \). 
\end{itemize}
% 
Since \MLTT is a subset of \HoTT, our tentative definitions can be 
interpreted as talking about spaces as well and should ideally make sense
from this perspective. 
% 
So, does our definition properly encode \defnote{presheaves of 
spaces}{Presheaves of spaces are an incarnation of higher presheaves, the
analogue of regular presheaves in higher category theory.}?
% 
Unfortunately, it does not. 

Our definition would in fact work for presheaves of spaces if \field{F\_id} 
and \field{F\_comp} were definitional equalities. 
% 
But when we relax these equalities to mere paths (propositional equalities), we 
introduce superfluous information -- as we have seen, there are now several 
ways to use \field{F\_id} and \field{F\_comp} to prove what should really be a 
equality ``on the nose'' in the corresponding spaces.
% 
And since paths are relevant information in \HoTT, the object we get is 
actually different from what we aim for.
% 
Of course, we do not have access to the definitional equality internally 
in type theory, so we have to find another way to eliminate these extra paths.

We can try to add new fields to the record \func{presheaf} that enforce 
propositional equations between the redundant equality witnesses, such as

\begin{code}
\>[0] \field{F\_coh} : \AgdaSymbol{∀}\ f\ g\ h\ \AgdaSymbol{→}
\>[94I]\ (\field{F\_comp}\ h\ (f\ \func{∘}\ g))
\ \func{∙}\ ((\field{F₁}\ h)\ \func{∘}\ (\field{F\_comp}\ g\ f))\<%
\\
\>[.][@{}l@{}]\<[94I]%
\>[12]\func{≡}\ (\field{F\_comp}\ (g\ \func{∘}\ h)\ f)
\ \func{∙}\ ((\field{F\_comp}\ h\ g)\ \func{∘}\ (\field{F₁}\ f)) \<%
\end{code}
\sideremark[*-5]{\func{\_∙\_} denotes the transitivity of equality / composition of 
paths.}

While it is true that we can find a finite number of equations that account for 
all superfluous paths introduced by \field{F\_id} and \field{F\_comp}, this 
approach will not get us very far. 
% 
\field{F\_coh} itself introduces superfluous paths between paths, and only
leads us towards an infinite tower of coherences of ever increasing 
dimensions, with no appearant way to make it fit into a finite definition.

Here, we recognize a well-known pattern, as difficulties with infinite 
towers of coherences show up for numerous definitions in Homotopy Type Theory.
% 
The most famous such definition is that of \emph{semi-simplicial types}, 
which was identified in the early years of \HoTT \cite{IAS2012semisimplicial}, 
and remains an open problem as of today \sidecite{buchholtzSemiSimplicial}.

Semi-simplicial types are presheaves on the category of finite ordinals and 
strictly increasing maps \( \Delta_+ \).
% 
As we will explain shortly, if our type theory supports strict propositions,
\( \Delta_+ \) can be presented as a category that satisfies the composition
and the unit laws by definition, thereby making semi-simplicial sets a special
case of our problem.

\subsection{Possible Workarounds}

Thanks to the perspective of Homotopy Type Theory, we now understand that
defining presheaves of types on a general category is delicate because of the 
intricate higher-dimensional structure that may be encoded in identity types.
% 
Even though the problem of simplicial types remains open, there are still 
ways to avoid coherence problems with presheaves in type theory:

\paragraph{Presheaves of hsets} If types in \HoTT correspond to spaces, there 
is a certain subclass of types that can be identified as sets.
% 
These are the \emph{hsets}: types \( X \) equipped with a proof that all 
paths between any two points of \( X \) are equal

\ExecuteMetaData[chapters/literate-agda/Presheaf.tex]{hset}

Interestingly, \field{is\_hset} removes all the non-trivial loops from 
\field{X} without introducing any higher-dimensional coherence problems 
(theorem 7.1.7 in \sidecite{HottBook13}). 
% 
Such is the mystery that shrouds coherence towers: sometimes we can find 
a finite definition that handles them properly, sometimes this definition 
remain elusive.

Anyway, one can define presheaves of hsets and develop large swaths of category
theory without fearing coherence issues \sidecite{hottcoq}, but these proofs
will not generalize to the corresponding theorems in higher category theory.

\paragraph{Uniqueness of Identity Proofs (UIP)}
% 
Going further in that direction, we can modify the type theory itself to 
enforce the uniqueness of identity proofs, so that every type is a hset.
% 
In the observational type theories \SetoidTT and \SetoidCC that we introduced 
in the first part of this thesis, the identity types are strict propositions,
which means all identity proofs are equal by definition.

This framework comes very close to constructive set theory, so we can
reasonably expect that doing mathematics with presheaves will not pose 
significant problems.

\paragraph{Two-level type theories}
% 
Instead of curtailing the identity types, two-level type theories 
(\sidecite{voevodsky:2013:hts}, \sidecite{annenkov-capriotti-kraus:2017})
feature two distinct propositional equalities: a homotopical equality that 
encodes paths, as well as a strict equality that encodes the actual equality
of points and satisfies UIP.

Then, we can state the definition of a presheaf using the strict equality
and avoid coherence problems, while still supporting types with arbitrarily
complex homotopical structures -- at the price of additional complexity
and manipulations of \emph{fibrancy conditions}.

\section{Prefascist Types}

All the definitions of presheaves that we just listed follow the same general
pattern: they keep the shape of the set-theory-inspired definition, and
then they find a way to force the propositional equalities involved in the
definition to behave like strict equalities, \ie to prevent them from 
introducing relevant path information. 

However, this is not the only possible approach: 
% 
in \sidecite{pedrot:prefascist}, Pédrot designs a syntactical model of \CIC in
an extension of \CIC, such that every type is interpreted as a presheaf which
is functorial up to \emph{definitional equality}. 
% 
In order to do so, Pédrot introduces \defnote{prefascist types}{Prefascist 
types owe their eyebrow-raising name to the French word for presheaf, 
\textit{préfaisceau}, and to the humor of Pierre-Marie Pédrot.}, an original
take on the definition of a presheaf.

In this section, we explain the definition of prefascist types and show some of 
their properties.
% 
As in \cref{sec:intensional-problems}, we assume that we are working with a 
\emph{strict} category, that is a category \( \cat{C} \) that satisfies the 
associativity and unit laws by definition. 

Moreover, we will extend \MLTT with a sort of strict propositions \func{Prop},
as implemented by \Coq, \Agda and \Lean \sidecite{gilbert:hal-01859964}.
% 
It works just like the universe \func{Set}, except that any type \( A \) 
in \func{Prop} is proof-irrelevant, meaning that all terms with type 
\( A \) are convertible.
% 
We also add a strict truncation operator \func{∥\_∥ₛ} that embeds 
proof-relevant types in \func{Prop}.

As an illustration for the use of \func{Prop}, we can now have the category 
\( \Delta_+ \) of finite ordinals and increasing maps as a strict category.
If we define the monotonicity predicate as a strict proposition, then 
morphisms of \( \Delta_+ \) are a pair of a function and a computationally
irrelevant monotonicity proof, so that composition reduces to regular function 
composition, which is definitionally associative.
% 
In \cref{sec:cat-strictification}, we will explain that we can handle all small
categories in this way.

\subsection{What are Prefascist Types?}

In order to arrive to a definition of prefascist types, we start by 
investigating strict presheaves -- even though we do not have a working 
definition for their type, we can still assume we have an object \( F \)
that satisfies the functoriality equations up to definitional equality:

\sideremark{Here, we abuse \Agda notation again. This should really be read
as assuming actual implementations of \func{F₀} and \func{F₁} that satisfy
the two definitional equations.}
\ExecuteMetaData[chapters/literate-agda/PrePrefascist.tex]{strictpsh}

Although we cannot define it internally in \MLTT, we will write 
\( \catsPsh{\cat{C}} \) for the category of type-theoretical strict presheaves
and strict natural transformations.

Remark that given \( x \) in \( \func{F₀}\ p \), we can use \( \func{F₁} \) to 
get an inhabitant of \( \func{F₀}\ q \) whenever we have a morphism 
from \( q \) to \( p \).
% 
In other words, having the presheaf structure laying around means that elements
of \( \func{F₀}\ p \) are really promoted to inhabitants of
\[
\widehat{\func{F₀}}\ p := \AgdaSymbol{∀}\ q\ (α : \func{Hom}\ q\ p)\ \AgdaSymbol{→}\ \func{F₀}\ q
\]
where the promoted version of \( x : \func{F₀}\ p \) is given by
\[
\widehat{x} := \AgdaSymbol{λ}\ q\ α\ \AgdaSymbol{→}\ \func{F₁}\ α\ x.
\]
Tracking all restrictions like this allows us to define functoriality for 
\( \widehat{\func{F₀}} \) as a simple composition, without any reference to 
\func{F₁}
\[
\begin{array}{lcl}
    \alpha\ \func{∙}\ \_ & : & \widehat{\func{F₀}}\ p\ \AgdaSymbol{→}\ \widehat{\func{F₀}}\ q \\
    \alpha\ \func{∙}\ \widehat{x} & := & \AgdaSymbol{λ}\ r\ β\ \AgdaSymbol{→}\ \widehat{x}\ r\ (α\ \func{∘}\ β).    
\end{array}
\]
Now, remember how we insisted that \( \cat{C} \) satisfies associativity and 
the unit law up to definitional equality -- this is because thanks to these
equations, \( \widehat{\func{F₀}} \) is strictly functorial:
\begin{align*}
    β\ \func{∙}\ (α\ \func{∙}\ \widehat{x}) & = (α\ \func{∘}\ β)\ \func{∙}\ \widehat{x} \\
    (\func{id}\ p)\ \func{∙}\ \widehat{x} & = \widehat{x}.
\end{align*}
Thus, \( \widehat{\func{F₀}} \) is an object of \( \catsPsh{\cat{C}} \),
and since \func{F₁} satisfies the functoriality equations by definition, 
our embedding \( x \mapsto \widehat{x} \) commutes with restriction:
\( \alpha\ \func{∙}\ \widehat{x} \) is convertible to the promotion
of \( \func{F₁}\ \alpha\ x \). 
% 
This means that we have a natural tranformation 
\( F \to \widehat{\func{F₀}} \), which effectively replaces the 
functoriality given by \( \func{F₁} \) with composition in \( \cat{C} \).

The strict presheaves that can be expressed as \( \widehat{X} \) for some 
\( X : \func{Obj} \to \func{Set} \) 
% 
(that we will call \defnote{cofree}{In the next section, we present 
presheaves as coalgebras, and presheaves of the form \( \widehat{X} \) 
will be cofree coalgebras.} presheaves) 
% 
are remarkably tractable, since their functoriality operation is automatically
provided by composition and will satisfy the required equations on the nose.
% 
And as we just explained, every strict presheaf can be embedded into a
cofree presheaf.
% 
This leads us to the definition of a \emph{prefascist type} as a sub-presheaf 
of a cofree presheaf:

\ExecuteMetaData[chapters/literate-agda/Prefascist.tex]{prefascist}

This definition represents the subpresheaf of \( \widehat{\field{F₀}} \) 
that is obtained by only keeping the elements of 
\( \widehat{\field{F₀}}\ p \) that satisfy the proof-irrelevant predicate
\( \field{Fε} \) for all their restrictions:

\ExecuteMetaData[chapters/literate-agda/Prefascist.tex]{elem}

Prefascist types are still strict presheaves, as we can define 
functoriality using composition which is of course stricly associative:
\[
\begin{array}{lcl}
    \alpha\ \func{∙}\ \_ & : & \func{elem}\ F\ p\ \AgdaSymbol{→}\ \func{elem}\ F\ q \\
    \alpha\ \func{∙}\ \func{⟨}\ \field{x₀}\ \func{,}\ \field{xε}\ \func{⟩} & 
        := & \func{⟨}\ \alpha\ \func{∙}\ \field{x₀}\ \func{,}\ \alpha\ \func{∙}\ \field{xε} \ \func{⟩}  
\end{array}
\]
Finally, morphisms of prefascist types are defined as

\ExecuteMetaData[chapters/literate-agda/Prefascist.tex]{morphism}

This definition might look daunting at first, but it simply imitates
the definition of an element of \( G \) with an element of \( F \) in the 
context: ``morphisms are generalized elements''. We invite the reader
to check that morphisms are in fact strict natural transformations (meaning 
that the naturality holds by definition, as usual).

Thus, our prefascist types form a remarkable subcategory of \( \catsPsh{\cat{C}} \) that
can be defined in a minor extension of \MLTT.
% 
Naturally, this begs the question of which presheaves can be encoded as
prefascist sets. In the next section, we will see that prefastist types
are equivalent to the full category of presheaves in a set-truncated theory, 
but unfortunately falls short of it when homotopical information 
becomes relevant.

\subsection{Categorical Perspective}

In this section, we explain what are prefascist types on \( \cat{C} \) from 
the perspective of category theory. We assume that the reader is familiar 
with the theory of monads and adjunctions.

While the problem of internally defining presheaves of types on an general 
category is rather delicate, there are particular cases in which it reduces 
to something much simpler.
% 
In particular, if the category is \defnote{discrete}{A category is discrete if 
it has only identity morphisms.}, then presheaves of types on \( \cat{C} \) are 
just types indexed by \( \obj{\cat{C}} \), and morphisms are indexed functions.
This category is simple enough to define in intensional type theory, and all of 
the equations are (vacuously) verified up to definitional equality.

Now, remark that every category \( \cat{C} \) contains a discrete subcategory
\( \cat{C}_0 \), which has the same objects as \( \cat{C} \) but only identity
morphisms. The embedding \( \cat{C}_0 \hookrightarrow \cat{C} \) gives rise
to a ``pullback'' functor
\[
f^* : \catsPsh{\cat{C}} \to \catsPsh{\cat{C}_0}
\]
which simply forgets the functoriality of a strict presheaf. 
\sideremark{\( f^* \) also has a left adjoint, thus both \( f^* \) and \( f_* \) preserve limits.}
This functor has a right adjoint \( f_* \), given by
\[
\begin{array}{lcl}
f_* & : & \catsPsh{\cat{C}_0} \to \catsPsh{\cat{C}} \\
f_* X (p) & := & \AgdaSymbol{∀}\ q\ (α : \func{Hom}\ q\ p)\ \AgdaSymbol{→}\ X\ q
\end{array}
\]
which is the same as our construction \( \widehat{X} \) from the previous 
section. The comonad \( f^* f_* \) associated with this adjunction presents
presheaves as a coalgebraic theory:
% 
\begin{theorem}
  \( \catsPsh{\cat{C}} \) is equivalent to the category of (strict) coalgebras 
  of the the comonad \( f^* f_* \). In other words, \( f^* \dashv f_* \) is a 
  comonadic adjunction.
\end{theorem}
\begin{proof}
  A strict coalgebra for \( f^* f_* \) is by definition an collection of types 
  \( F \) indexed by the objects of \( \cat{C} \), along with a 
  collection of functions
  \[ 
     F(p) \to \AgdaSymbol{∀}\ q\ (α : \func{Hom}\ q\ p)\ \to\ F(q)
  \]
  that satisfy the two comonad equations by definition, which are respectively the 
  compatibility with composition and identities.
\end{proof}

As we know, defining the category of coalgebras (\ie all presheaves) in \MLTT 
is problematic because of the coalgebra equations.
% 
However, there is an important subcategory that we can define in type theory: the
co-Kliesli category of the adjunction, which is equivalent to the category of 
cofree coalgebras.
%
The elements of the co-Kliesli category are types indexed on \( \obj{\cat{C}} \), 
and the hom-types are given by
\[
    \hom[\mathrm{coK}]{F}{G} := \AgdaSymbol{∀}\ p\ \to f^* f_* F(p) \to G(p).
\]
The composition of two morphisms in the co-Kliesli category is 

And then, prefascist types are defined as subobjects of cofree presehaves. 
Since the presheaf that encodes the subobject classifier is a cofree presheaf 

\begin{definition}
  A prefascist type is defined to be a 
\end{definition}

\begin{theorem}
  If we assume UIP, then the category of prefascist types is equivalent to
  the category of presheaves on \( \cat{C} \).

\end{theorem}
\begin{proof}

\end{proof}

However, not every 
\begin{theorem}
  Every presheaf of sets is 
\end{theorem}

\subsection{Properties of Prefascist Types}

\subsection{Stricly Associative Categories}\label{sec:cat-strictification}

Note that the definition of a category exhibits the same problem if we try to
use types to encode hom-sets. 
% 
Relaxing the associativity of composition and the unital laws by only having
them hold up to a path introduces non-trivial coherence problems that require 
infinite towers of equalities to solve, which we avoided by asking for our
category \( \cat{C} \) to satisfy them by definition.

In fact, there is no way to define the type of \defnote{type-enriched 
categories}{Type-enriched categories are categories that have types as their
hom-sets.} in \HoTT that we currently know of. 

\subsection{The Prefascist Translation}

\section{Higher Prefascist Types}

\section{The Bar Construction}